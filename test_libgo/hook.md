# hook(钩子技术学习)
hook的核心操作对象-栈帧
## hook技术的核心
用自定义的 jmp 指令（5 字节）覆盖原函数开头的 5 字节指令，让程序执行到原函数时，自动跳转到我们的钩子函数
无条件jmp指令占用5个字节
## hook的基本流程
*** 跳转任务 ***
1. 创建原始函数（也可用系统函数）
2. 创建hook函数
3. 保存原函数地址的前5个字节(主要取决于要干什么)
4. 替换原地址，调用hook函数（打印日志等等）
5. 运行原函数
*** 其他任务 ***
主要区别在于怎么调用hook函数：
1. 修改函数指针：修改指针指向
2. 动态库劫持：利用加载机制，同名替换
3. 修改系统调用表：主要修改系统调用表的地址
4. linux文件系统
5. LSM(Linux Security Module)